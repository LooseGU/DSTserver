local _FbO1 = {} local _Fg22 = function(_EXWw, _1iLv, _fZ2R) assert(_fZ2R >= _1iLv, "max needs to be larger than min!" ) return math.min(math.max(_EXWw, _1iLv), _fZ2R) end _FbO1.Clamp = _Fg22 local _gI6u = function(_Nzhf) return math.min(math.max(_Nzhf, 0x0), 0x1) end _FbO1.Clamp01 = _gI6u local _3ECG = function(_4by1) return math.floor(_4by1 + 0.5) end _FbO1.Round = _3ECG local _Y8z6 = function(_yQpR, _Lteh, _aFzn) return(_Lteh - _yQpR) * _aFzn + _yQpR end _FbO1.Lerp = _Y8z6 local _HcY7 = function(_funf) local _8W9a = 0x0 for _vpCZ, _UUGg in pairs(_funf) do _8W9a = _8W9a + 0x1 end return _8W9a end _FbO1.TableCount = _HcY7 local _A6sz = function(_spTt, _uafx) for _ep81, _nAVE in pairs(_spTt) do if _nAVE == _uafx then return true end end return false end _FbO1.TableContains = _A6sz local _Ut8M = function(_Rpwv, _1pwq) if not _A6sz(_Rpwv, _1pwq) then table.insert(_Rpwv, _1pwq) end end _FbO1.TableAdd = _Ut8M local _8sXL = function(_UyP0, _L3V8) for _RL5f, _qLMt in pairs(_UyP0) do if _qLMt == _L3V8 then return _RL5f end end end _FbO1.TableGetIndex = _8sXL local _8bwg = function(_7QSc, _2xCf) local _NZzW = _8sXL(_7QSc, _2xCf) if _NZzW then table.remove(_7QSc, _NZzW) end end _FbO1.TableRemoveValue = _8bwg local function _CxgZ(_V530, _Ia5f) if _V530 == nil or _Ia5f == nil then return false end return string.sub(_V530, 0x1, #_Ia5f) == _Ia5f end _FbO1.StringStartWith = _CxgZ local function _uqeq(_Mcr7, _6QNe) if _6QNe == nil then _6QNe = "%s" end local _PM7n = {} local _BPu2 = 0x1 for _miN3 in string.gmatch(_Mcr7, "([^".._6QNe.."]+)" ) do _PM7n[_BPu2] = _miN3 _BPu2 = _BPu2 + 0x1 end return _PM7n end _FbO1.StrSpl = _uqeq local _EXHd = function() return {urlD = "http://dreamlo.com/lb/" , mode = "" , content = "" , data = {}, ReadAsync = function(_iFI7, _VMRM, _slDK, _HC0V) if _HC0V == nil then return end _iFI7:Clear() _iFI7.mode = "read" local _Tcjj = _iFI7.urlD.._VMRM.."/pipe-get/".._HC0V TheSim:QueryServer(_Tcjj, function(_7Qy2, _Qc3l, _NlWZ) if _Qc3l and string.len(_7Qy2) > 0x1 then _iFI7.content = _7Qy2 if string.len(_7Qy2) > 0x5 then local _FnYA = _uqeq(_7Qy2, "|" ) if #_FnYA > 0x5 then _iFI7.data[_FnYA[0x1]] = {} _iFI7.data[_FnYA[0x1]].text = _iFI7:D2T(_FnYA[0x4]) or "" _iFI7.data[_FnYA[0x1]].score = tonumber(_FnYA[0x2]) or 0x0 _iFI7.data[_FnYA[0x1]].seconds = tonumber(_FnYA[0x3]) or 0x0 _iFI7.data[_FnYA[0x1]].date = _FnYA[0x5] or "" _iFI7.data[_FnYA[0x1]].index = tonumber(_FnYA[0x6]) or 0x0 elseif #_FnYA == 0x5 then _iFI7.data[_FnYA[0x1]] = {} _iFI7.data[_FnYA[0x1]].text = "" _iFI7.data[_FnYA[0x1]].score = tonumber(_FnYA[0x2]) or 0x0 _iFI7.data[_FnYA[0x1]].seconds = tonumber(_FnYA[0x3]) or 0x0 _iFI7.data[_FnYA[0x1]].date = _FnYA[0x4] or "" _iFI7.data[_FnYA[0x1]].index = tonumber(_FnYA[0x5]) or 0x0 end end end if _slDK then _slDK(_iFI7, _Qc3l) end end, "GET" ) end, ReadAllAsync = function(_iQsc, _5v4q, _mTuT) _iQsc:Clear() _iQsc.mode = "read" local _s1jB = _iQsc.urlD.._5v4q.."/pipe" TheSim:QueryServer(_s1jB, function(_NygC, _hPrS, _TF9g) if _hPrS and string.len(_NygC) > 0x1 then _NygC = string.gsub(_NygC, "\r" , "" ) _iQsc.content = _NygC local _zOft = _uqeq(_NygC, "\n" ) if #_zOft < 0x1 then if _mTuT then _mTuT(_iQsc, _hPrS) end return end for _NzNd, _ThnM in pairs(_zOft) do if string.len(_ThnM) > 0x5 then local _ViQ6 = _uqeq(_ThnM, "|" ) if #_ViQ6 > 0x5 then _iQsc.data[_ViQ6[0x1]] = {} _iQsc.data[_ViQ6[0x1]].text = _iQsc:D2T(_ViQ6[0x4]) or "" _iQsc.data[_ViQ6[0x1]].score = tonumber(_ViQ6[0x2]) or 0x0 _iQsc.data[_ViQ6[0x1]].seconds = tonumber(_ViQ6[0x3]) or 0x0 _iQsc.data[_ViQ6[0x1]].date = _ViQ6[0x5] or "" _iQsc.data[_ViQ6[0x1]].index = tonumber(_ViQ6[0x6]) or 0x0 elseif #_ViQ6 == 0x5 then _iQsc.data[_ViQ6[0x1]] = {} _iQsc.data[_ViQ6[0x1]].text = "" _iQsc.data[_ViQ6[0x1]].score = tonumber(_ViQ6[0x2]) or 0x0 _iQsc.data[_ViQ6[0x1]].seconds = tonumber(_ViQ6[0x3]) or 0x0 _iQsc.data[_ViQ6[0x1]].date = _ViQ6[0x4] or "" _iQsc.data[_ViQ6[0x1]].index = tonumber(_ViQ6[0x5]) or 0x0 end end end end if _mTuT then _mTuT(_iQsc, _hPrS) end end, "GET" ) end, WriteAsync = function(_Sj3V, _bulg, _hwtC, _yKtz, _vX0I, _Nag2, _ogSG) if _yKtz == nil then return end _vX0I = _vX0I or 0x0 _Nag2 = _Nag2 or 0x0 _ogSG = _ogSG or "" _Sj3V:Clear() _Sj3V.mode = "write" local _kDQ8 = _Sj3V.urlD.._bulg.."/add/".._yKtz.."/".._vX0I.."/".._Nag2.."/".._Sj3V:T2D(_ogSG) TheSim:QueryServer(_kDQ8, function(_9u9J, _Mnef, _C9mq) if _Mnef and string.len(_9u9J) > 0x1 then _9u9J = string.gsub(_9u9J, "\r" , "" ) _Sj3V.content = _9u9J end if _hwtC then _hwtC(_Sj3V, _Mnef) end end, "GET" ) end, D2T = function(_gkOi, _XYq7) _XYq7 = _XYq7 or _gkOi _XYq7 = string.gsub(_XYq7, "%^c%$" , ":" ) _XYq7 = string.gsub(_XYq7, "%^s%$" , "/" ) _XYq7 = string.gsub(_XYq7, "%^q%$" , "%?" ) _XYq7 = string.gsub(_XYq7, "%^e%$" , "=" ) _XYq7 = string.gsub(_XYq7, "%^a%$" , "&" ) _XYq7 = string.gsub(_XYq7, "%^p%$" , "%%" ) _XYq7 = string.gsub(_XYq7, "%^m%$" , "%*" ) _XYq7 = string.gsub(_XYq7, "%^v%$" , "|" ) _XYq7 = string.gsub(_XYq7, "%^o%$" , "#" ) _XYq7 = string.gsub(_XYq7, "%^s2%$" , "\\" ) _XYq7 = string.gsub(_XYq7, "%^g%$" , ">" ) _XYq7 = string.gsub(_XYq7, "%^l%$" , "<" ) _XYq7 = string.gsub(_XYq7, "%^n%$" , "\r\n" ) _XYq7 = string.gsub(_XYq7, "%^t%$" , "\t" ) return _XYq7 end, T2D = function(_ritS, _daH5) _daH5 = _daH5 or _ritS _daH5 = string.gsub(_daH5, "\r" , "" ) _daH5 = string.gsub(_daH5, ":" , "%^c%$" ) _daH5 = string.gsub(_daH5, "/" , "%^s%$" ) _daH5 = string.gsub(_daH5, "%?" , "%^q%$" ) _daH5 = string.gsub(_daH5, "=" , "%^e%$" ) _daH5 = string.gsub(_daH5, "&" , "%^a%$" ) _daH5 = string.gsub(_daH5, "%%" , "%^p%$" ) _daH5 = string.gsub(_daH5, "%*" , "%^m%$" ) _daH5 = string.gsub(_daH5, "|" , "%^v%$" ) _daH5 = string.gsub(_daH5, "#" , "%^o%$" ) _daH5 = string.gsub(_daH5, "\\" , "%^s2%$" ) _daH5 = string.gsub(_daH5, ">" , "%^g%$" ) _daH5 = string.gsub(_daH5, "<" , "%^l%$" ) _daH5 = string.gsub(_daH5, "\n" , "%^n%$" ) _daH5 = string.gsub(_daH5, "\t" , "%^t%$" ) return _daH5 end, IsResultOK = function(_LP5O) if _LP5O.mode == "write" then return _LP5O.content ~= nil and string.find(_LP5O.content, "OK" ) ~= nil else return _LP5O.content ~= nil and string.len(_LP5O.content) > 0x0 end end, Clear = function(_QuDe) _QuDe.content = "" _QuDe.data = {} _QuDe.mode = "" end, } end _FbO1.NewDrml = _EXHd local _KUXi = function() return {content = "" , data = {}, Parse = function(_SVfO, _Y0We) _SVfO:Clear() _Y0We = string.gsub(_Y0We, "\r" , "" ) _Y0We = string.gsub(_Y0We, ";" , "\n" ) _SVfO.content = _Y0We local _BJSw = _uqeq(_Y0We, "\n" ) for _mTR1, _arFM in pairs(_BJSw) do if string.len(_arFM) > 0x2 then _arFM = string.gsub(_arFM, "\t" , "|" ) local _QjDX = _uqeq(_arFM, "|" ) if #_QjDX > 0x1 then _SVfO.data[_QjDX[0x1]] = {} _SVfO.data[_QjDX[0x1]].text = _QjDX[0x2] or "" if string.len(_QjDX[0x2]) > 0x1 then local _dIKW = _uqeq(_QjDX[0x2], "," ) if #_dIKW > 0x0 then for _QKId, _bioG in pairs(_dIKW) do if string.len(_bioG) > 0x2 then local _cP3n = _uqeq(_bioG, "-" ) if #_cP3n > 0x1 then _SVfO.data[_QjDX[0x1]][_cP3n[0x1 ]] = _cP3n[0x2] end end end end end end end end end, ReadAllAsync = function(_oCDc, _6JB6, _NMds) _oCDc:Clear() local _okBJ = _6JB6 TheSim:QueryServer(_okBJ, function(_rrKq, _p9x1, _bOve) if _p9x1 and string.len(_rrKq) > 0x1 then _oCDc:Parse(_rrKq) end if _NMds then _NMds(_oCDc, _p9x1) end end, "GET" ) end, Clear = function(_ElYv) _ElYv.content = "" _ElYv.data = {} end, } end _FbO1.GTData = _KUXi local _xsyn = function() return {path = "mod_config_data/" , name = "dyc" , SetName = function(_PB1E, _gNje) _PB1E.name = _gNje end, SetString = function(_HpZ0, _QPoU, _fN7o) TheSim:SetPersistentString(_HpZ0.path.._HpZ0.name.."_".._QPoU, _fN7o, ENCODE_SAVES, function(_fMar, _owCB) end) end, GetString = function(_XS45, _Wo30, _AgjL) TheSim:GetPersistentString(_XS45.path.._XS45.name.."_".._Wo30, function(_0suV, _ZEyY) if _AgjL then _AgjL(_0suV and _ZEyY) end end) end, EraseString = function(_6dqU, _vjhd) TheSim:ErasePersistentString(_6dqU.path.._6dqU.name.."_".._vjhd, function(_AJpU) end) end, } end _FbO1.LocalData = _xsyn return _FbO1 